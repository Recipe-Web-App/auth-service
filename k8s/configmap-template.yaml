---
# k8s/configmap-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: auth-service-config
  namespace: auth-service
  labels:
    app: auth-service
data:
  # Server Configuration
  SERVER_HOST: '${SERVER_HOST}'
  SERVER_PORT: '${SERVER_PORT}'
  SERVER_READ_TIMEOUT: '${SERVER_READ_TIMEOUT}'
  SERVER_WRITE_TIMEOUT: '${SERVER_WRITE_TIMEOUT}'
  SERVER_IDLE_TIMEOUT: '${SERVER_IDLE_TIMEOUT}'
  SERVER_SHUTDOWN_TIMEOUT: '${SERVER_SHUTDOWN_TIMEOUT}'

  # Redis Configuration (non-sensitive)
  REDIS_URL: '${REDIS_URL}'
  REDIS_DB: '${REDIS_DB}'
  REDIS_MAX_RETRIES: '${REDIS_MAX_RETRIES}'
  REDIS_POOL_SIZE: '${REDIS_POOL_SIZE}'
  REDIS_MIN_IDLE_CONN: '${REDIS_MIN_IDLE_CONN}'
  REDIS_DIAL_TIMEOUT: '${REDIS_DIAL_TIMEOUT}'
  REDIS_READ_TIMEOUT: '${REDIS_READ_TIMEOUT}'
  REDIS_WRITE_TIMEOUT: '${REDIS_WRITE_TIMEOUT}'
  REDIS_POOL_TIMEOUT: '${REDIS_POOL_TIMEOUT}'
  REDIS_IDLE_TIMEOUT: '${REDIS_IDLE_TIMEOUT}'

  # Database Configuration (non-sensitive)
  POSTGRES_HOST: '${POSTGRES_HOST}'
  POSTGRES_PORT: '${POSTGRES_PORT}'
  POSTGRES_DB: '${POSTGRES_DB}'
  POSTGRES_SCHEMA: '${POSTGRES_SCHEMA}'
  AUTH_DB_USER: '${AUTH_DB_USER}'
  POSTGRES_SSL_MODE: '${POSTGRES_SSL_MODE}'

  # JWT Configuration (non-sensitive)
  JWT_ISSUER: '${JWT_ISSUER}'
  JWT_ACCESS_TOKEN_EXPIRY: '${JWT_ACCESS_TOKEN_EXPIRY}'
  JWT_REFRESH_TOKEN_EXPIRY: '${JWT_REFRESH_TOKEN_EXPIRY}'
  JWT_ALGORITHM: '${JWT_ALGORITHM}'

  # OAuth2 Configuration
  OAUTH2_PKCE_REQUIRED: '${OAUTH2_PKCE_REQUIRED}'
  OAUTH2_AUTHORIZATION_CODE_EXPIRY: '${OAUTH2_AUTHORIZATION_CODE_EXPIRY}'
  OAUTH2_CLIENT_CREDENTIALS_EXPIRY: '${OAUTH2_CLIENT_CREDENTIALS_EXPIRY}'
  OAUTH2_SUPPORTED_GRANT_TYPES: '${OAUTH2_SUPPORTED_GRANT_TYPES}'
  OAUTH2_SUPPORTED_RESPONSE_TYPES: '${OAUTH2_SUPPORTED_RESPONSE_TYPES}'

  # Security Configuration
  SECURITY_RATE_LIMIT_RPS: '${SECURITY_RATE_LIMIT_RPS}'
  SECURITY_RATE_LIMIT_BURST: '${SECURITY_RATE_LIMIT_BURST}'
  SECURITY_RATE_LIMIT_WINDOW: '${SECURITY_RATE_LIMIT_WINDOW}'
  SECURITY_ALLOWED_ORIGINS: '${SECURITY_ALLOWED_ORIGINS}'
  SECURITY_ALLOWED_METHODS: '${SECURITY_ALLOWED_METHODS}'
  SECURITY_ALLOWED_HEADERS: '${SECURITY_ALLOWED_HEADERS}'
  SECURITY_ALLOW_CREDENTIALS: '${SECURITY_ALLOW_CREDENTIALS}'
  SECURITY_MAX_AGE: '${SECURITY_MAX_AGE}'
  SECURITY_SECURE_COOKIES: '${SECURITY_SECURE_COOKIES}'
  SECURITY_SAME_SITE_COOKIES: '${SECURITY_SAME_SITE_COOKIES}'

  # Logging Configuration
  LOGGING_LEVEL: '${LOGGING_LEVEL}'
  LOGGING_FORMAT: '${LOGGING_FORMAT}'
  LOGGING_OUTPUT: '${LOGGING_OUTPUT}'
  LOGGING_ENABLE_DUAL_OUTPUT: '${LOGGING_ENABLE_DUAL_OUTPUT}'
  LOGGING_CONSOLE_FORMAT: '${LOGGING_CONSOLE_FORMAT}'
  LOGGING_FILE_FORMAT: '${LOGGING_FILE_FORMAT}'
  LOGGING_FILE_PATH: '${LOGGING_FILE_PATH}'
